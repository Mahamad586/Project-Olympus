name: Olympus Engine v2.0 - "The All-Seeing"

on:
  workflow_dispatch:
    inputs:
      target:
        description: 'The primary target domain (e.g., tesla.com)'
        required: true
        default: 'tesla.com'
      modules:
        description: 'Comma-separated list of modules (recon,vuln_scan)'
        required: true
        default: 'recon,vuln_scan'

jobs:
  orchestrator:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Olympus Codebase
        uses: actions/checkout@v4

      - name: Install Go for Tools
        uses: actions/setup-go@v5
        with:
          go-version: '1.21'

      - name: ğŸš€ [Module] Basic Reconnaissance
        id: recon
        if: "contains(github.event.inputs.modules, 'recon')"
        run: |
          echo "Starting Basic Reconnaissance module for ${{ github.event.inputs.target }}..."
          chmod +x modules/recon/run.sh
          ./modules/recon/run.sh ${{ github.event.inputs.target }}
          echo "recon_results_path=recon_results/${{ github.event.inputs.target }}" >> $GITHUB_OUTPUT

      - name: ğŸ‘ï¸ [Module] Vulnerability Scanning
        id: vuln_scan
        if: "contains(github.event.inputs.modules, 'vuln_scan')"
        run: |
          echo "Starting Vulnerability Scanning module for ${{ github.event.inputs.target }}..."
          chmod +x modules/vuln_scan/run.sh
          ./modules/vuln_scan/run.sh ${{ github.event.inputs.target }}

      - name: ğŸ§  [Brain] Storing All Artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: olympus-results-${{ github.event.inputs.target }}
          path: recon_results/${{ github.event.inputs.target }}/
